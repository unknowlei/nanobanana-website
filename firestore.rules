rules_version = '2';

// Firebase Firestore å®‰å…¨è§„åˆ™
// é¡¹ç›®: nano-banana-d0fe0
// æ›´æ–°è¯´æ˜: å…è®¸å…¬å¼€åˆ é™¤ pending_submissions é›†åˆä¸­çš„æ–‡æ¡£

service cloud.firestore {
  match /databases/{database}/documents {
    
    // å¾…å¤„ç†æŠ•ç¨¿é›†åˆ - å…è®¸å…¬å¼€è¯»å†™å’Œåˆ é™¤
    // åŸå› : API è·¯ç”± (approve-submission.js) ä½¿ç”¨ REST API åˆ é™¤æ–‡æ¡£
    // è¿™æ˜¯å¤„ç† CORS é—®é¢˜çš„æœ€ç®€å•æ–¹æ¡ˆ
    match /pending_submissions/{submissionId} {
      // å…è®¸ä»»ä½•äººè¯»å–
      allow read: if true;
      
      // å…è®¸ä»»ä½•äººåˆ›å»ºï¼ˆæŠ•ç¨¿åŠŸèƒ½ï¼‰
      allow create: if true;
      
      // å…è®¸ä»»ä½•äººæ›´æ–°ï¼ˆå¯é€‰ï¼Œç”¨äºä¿®æ”¹æŠ•ç¨¿çŠ¶æ€ï¼‰
      allow update: if true;
      
      // ğŸ”´ å…³é”®ä¿®å¤: å…è®¸ä»»ä½•äººåˆ é™¤ï¼ˆæ‰¹å‡†/æ‹’ç»æŠ•ç¨¿æ—¶éœ€è¦ï¼‰
      allow delete: if true;
    }
    
    // å…¶ä»–é›†åˆé»˜è®¤æ‹’ç»è®¿é—®ï¼ˆå¦‚æœ‰å…¶ä»–é›†åˆå¯åœ¨æ­¤æ·»åŠ è§„åˆ™ï¼‰
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
